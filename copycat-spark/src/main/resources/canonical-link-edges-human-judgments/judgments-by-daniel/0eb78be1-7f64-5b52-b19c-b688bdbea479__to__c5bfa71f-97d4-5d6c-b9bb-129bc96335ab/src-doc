groovi script groovi codehau skip content skip breadcrumb skip header menu skip action menu skip quick search link applic load space quick search help onlin help keyboard shortcut feed builder whatâ€™ new avail gadget about confluenc log tool attach 0 page histori restrict page inform link page view hierarchi view sourc export pdf export word copi page tree page home document cookbook exampl groovi script skip end metadata creat ganesh venkataraman last modifi dec 28 2009 go start metadata debat over script v program fact definit between two still go blurri context java program compris definit class it structur exampl simplest program mai have just class definit obvious particular code doesn't do anyth other than just defin class bare minimum us program mai contain coupl more line code java let try write program print hello world same greeter program can re written us static block even constructor so program follow some strict guidelin term structur other hand script have mixtur free hand statement semi fulli structur method element we try write greeter program groovi that class definit curli bracket strict syntax check semicolon just simpl readabl on line statement all other overhead have been encapsul after all encapsul on qualiti ani object orient program oop script isn't ok let delv too much contradict between script program neither true encapsul articl show power script us groovi walk you busi exampl enough ha been said about short hand structur groovi how shrink code element small fraction achiev same result it counterpart java so we take busi problem try solv us groovi script think groovi replac your perl script shell script context groovi competitor java just complement feed file gener scenario busi applic applic receiv fetch feed file from anoth applic locat process import applic stream mani situat where we need creat diff delta between two success feed make feed process perform better our exampl let assum feed xml structur given below briefli structur extern entiti custom applic send work request enterpris applic through feed file applic process all work request record navig tree like structur differ work request element basic each request contain client inform request type date support product inform order process inform real function applic someth out scope exampl our script need exactli two input data creat delta file viz current feed file last run feed file script ha valid respond caller base valu input element idea build script three section first on verifi input data second defin reusabl block code doe actual check find out differ final small block write output new file wai we handl some except case also let start build script valid input data number argument anyth equal 2 we proce we can print usag exit too so argument string valu input file file compar output folder name let skip some saniti check whether input file xml follow xsd structur etc let assum well structur requir xml file readi process we have some special parser api avail groovi process xml file dot notat let load input file us api singl statement we have load xml file memori all element xml file avail dot notat xpath queri element all we interest check whether each workrequest record today' file new modifi record comparison correspond record last run feed file here anoth assumpt id attribut work request someth like primari kei never chang we load todaysfil memori we load filetocompar also now we need write simpl closur routin fetch workrequest record from last run file search workrequest id abov routin search entir last run file look specif work request us xpath queri find match record entir work request return otherwis null return now we need write anoth small routin verifi whether two element todai file last run file chang simpl enough isn't two helper routin readi fire we need loop through feed file see which record chang which chang new record have includ delta file unchang record left out now we have collect all record process deltarequest list onli thing pend attach list under workrequest element xml write delta file write xml output api name groovy.xml.streamingmarkupbuild we us write file veri simpl step process we have written clean script process two similar structur xml file creat delta file when script plug applic process redund feed daili process we can significantli reduc process time just creat delta file make delta file input applic label power free atlassian confluenc open sourc project licens grant codehau evalu confluenc todai power atlassian confluenc 5.5.2 team collabor softwar print atlassian confluenc 5.5.2 team collabor softwar report bug atlassian new atlassian